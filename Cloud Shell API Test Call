import requests
import json
from datetime import datetime, timezone

API_URL = "https://api.frankfurter.app/latest"

def call_api():
    response = requests.get(API_URL, timeout=10)
    response.raise_for_status()
    return response.json()

def main():
    data = call_api()

    output = {
        "ingestion_timestamp": datetime.now(timezone.utc).isoformat(),
        "base_currency": data["base"],
        "date": data["date"],
        "rates": data["rates"]
    }

    print(json.dumps(output, indent=2))

if __name__ == "__main__":
    main()
